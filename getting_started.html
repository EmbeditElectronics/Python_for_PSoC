<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started &mdash; RPiSoC Python API 1.2.5 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="RPiSoC Python API 1.2.5 documentation" href="index.html" />
    <link rel="next" title="API modules" href="code.html" />
    <link rel="prev" title="Welcome to the RPiSoC Python API documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="code.html" title="API modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to the RPiSoC Python API documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">RPiSoC Python API 1.2.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started">
<span id="getting-started-label"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>Here is everything you should need to get yourself moving with development on the RPiSoC through the Raspberry Pi!</p>
<div class="section" id="using-the-rpisoc">
<span id="getting-started-rpisoc"></span><h2>Using the RPiSoC<a class="headerlink" href="#using-the-rpisoc" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re new to the RPiSoC, it would greatly benefit you to read through <a class="reference external" href="https://github.com/EmbeditElectronics/RPiSoC_Bootloader/blob/master/RPiSoC_RevC_User_Guide.pdf">its documentation</a> before going any further.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">Pay special attention to the sections discussing how to download a program to the board using the Bootloader Host Tool. However, if you do not intend to make modifications to the API, you do not need to reprogram the device.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="program-your-rpisoc">
<h2>Program your RPiSoC<a class="headerlink" href="#program-your-rpisoc" title="Permalink to this headline">¶</a></h2>
<p>Once you know how to program the RPiSoC, if you need to redownload the API, or if you intend to make firmware changes (as required for <a class="reference internal" href="#getting-started-mods"><em>Changing communication protocol used by the API</em></a>)
Just <a class="reference external" href="https://github.com/EmbeditElectronics/psoc_2_pi/tree/master/PSoC%20Creator">download the PSoC Creator project from git</a>, make your changes if desired, and download it to the RPiSoC using the Bootloader host tool.</p>
</div>
<div class="section" id="using-the-rpisoc-with-the-raspberry-pi">
<span id="getting-started-rpi"></span><h2>Using the RPiSoC with the Raspberry Pi<a class="headerlink" href="#using-the-rpisoc-with-the-raspberry-pi" title="Permalink to this headline">¶</a></h2>
<p>The following is necessary set up the RPiSoC in the Raspberry Pi environment</p>
<div class="section" id="download-the-python-source">
<span id="getting-started-source"></span><h3>Download the Python source<a class="headerlink" href="#download-the-python-source" title="Permalink to this headline">¶</a></h3>
<p>This can be achieved using the source hosted on our github, or by using the simplified pip process. Note that you should download the github content anyway if you intend to try the example projects</p>
<div class="section" id="installation-using-pip">
<h4>Installation using pip<a class="headerlink" href="#installation-using-pip" title="Permalink to this headline">¶</a></h4>
<p>Installing packages using pip is a convenient way to manage package updates, so this is the suggested method. But, you should still download the github content without installing it if you intend to make use of the examples.
First, make sure that pip is installed. From the terminal window:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install python-setuptools
sudo easy_install pip
</pre></div>
</div>
<p>Then, simply install the rpisoc source using pip:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo pip install rpisoc
</pre></div>
</div>
</div>
<div class="section" id="installation-using-git">
<h4>Installation using Git<a class="headerlink" href="#installation-using-git" title="Permalink to this headline">¶</a></h4>
<p>First, be sure that you have git installed on your Raspberry Pi. From the Terminal window:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install git-core
</pre></div>
</div>
<p>Then clone our git repo to the directory of your choice:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone git://github.com/EmbeditElectronics/psoc_2_pi.git
</pre></div>
</div>
<p>Navigate to the Python folder and install the source:</p>
<div class="highlight-python"><div class="highlight"><pre>cd API_Python
sudo python setup.py install
</pre></div>
</div>
</div>
</div>
<div class="section" id="configure-spi-and-download-spidev">
<span id="getting-started-spi"></span><h3>Configure SPI and download spidev<a class="headerlink" href="#configure-spi-and-download-spidev" title="Permalink to this headline">¶</a></h3>
<p>Now, if you want to use all of the API on the Raspberry Pi, you will need to have the SPI bus enabled, and you will need to have the spidev libraries installed and in your working directory.
Luckily, this is a very easy process. First though, you will should do an update/upgrade on your pi. Open a new terminal window and enter the following  commands:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get clean
sudo apt-get update
sudo apt-get upgrade
sudo reboot
</pre></div>
</div>
<p>Next, you will need to install the python-dev libraries, if they aren&#8217;t already installed:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install python-dev
</pre></div>
</div>
<p>Now you need to enable the SPI bus on your Pi, which is disabled by default to speed up the boot process:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo nano /etc/modprobe.d/raspi-blacklist.conf
</pre></div>
</div>
<p>This will bring up a text editor where you will find a line that reads:</p>
<div class="highlight-python"><div class="highlight"><pre>blacklist spi-bcm2708
</pre></div>
</div>
<p>Simply comment this line out by adding a <tt class="code docutils literal"><span class="pre">#</span></tt> to the front of it, and reboot your pi:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo reboot
</pre></div>
</div>
<p>Now, make a new directory for the spidev installation, and download the source and perform the installation:</p>
<div class="highlight-python"><div class="highlight"><pre>mkdir python-spi
cd python-spi
wget https://raw.github.com/doceme/py-spidev/master/setup.py
wget https://raw.github.com/doceme/py-spidev/master/spidev_module.c
sudo python setup.py install
</pre></div>
</div>
</div>
<div class="section" id="configure-i2c-and-download-smbus">
<span id="getting-started-i2c"></span><h3>Configure I2C and download smbus<a class="headerlink" href="#configure-i2c-and-download-smbus" title="Permalink to this headline">¶</a></h3>
<p>To use I2C for your communications between RPi and RPiSoC, you will need to configure your i2c bus, similarly to how it was done for SPI.</p>
<p>Assuming you have done an update/upgrade recently, as you should have if you followed the previous step, you must now enable i2c.
As was the case with SPI, I2C is disabled by the Pi by default. To change this, you must modify the blacklist again:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo nano /etc/modprobe.d/raspi-blacklist.conf
</pre></div>
</div>
<p>Now change the line:</p>
<div class="highlight-python"><div class="highlight"><pre>blacklist i2c-bcm2708
</pre></div>
</div>
<p>so that it instead reads:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#blacklist i2c-bcm2708</span>
</pre></div>
</div>
<p>Now you need to add the I2C module to the kernel:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo nano /etc/modules
</pre></div>
</div>
<p>And you should add to the end of this file the following line:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">i2c</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
<p>Now you simply must install the needed packages:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install i2c-tools
sudo apt-get install python-smbus
</pre></div>
</div>
<p>And to configure the software, you must add your username to the I2C access group.
In this case I&#8217;ll assume your username is <em>pi</em> so:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo adduser pi i2c
</pre></div>
</div>
<p>Now reboot:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo reboot
</pre></div>
</div>
<p>And when the pi boots back up, open the terminal, connect the RPiSoC with the program loaded, and test the i2c bus:</p>
<div class="highlight-python"><div class="highlight"><pre>i2cdetect -y 1
</pre></div>
</div>
<p>This should display dashed lines where no address was identified, except for where it found an address, and this should read <em>08</em> in the case of the RPiSoC API. If you do not see any results, try:</p>
<div class="highlight-python"><div class="highlight"><pre>i2cdetect -y 0
</pre></div>
</div>
<p>And if you see the 8, make sure to modify <tt class="xref py py-meth docutils literal"><span class="pre">__init__()</span></tt> of <a class="reference internal" href="code_rpisoc.html#rpisoc.I2C" title="rpisoc.I2C"><tt class="xref py py-class docutils literal"><span class="pre">rpisoc.I2C</span></tt></a> so that it reflects the usage of the correct bus.</p>
<p>If in either case you find that the address 0x3b is being used, and reflected by the appearance of <em>UU</em>, then try adding one of these three lines to your  blacklist:</p>
<div class="highlight-python"><div class="highlight"><pre>blacklist snd_soc_wm8804
blacklist snd_soc_bcm2708_i2s
blacklist snd_soc_pcm512x
</pre></div>
</div>
<p>This will disable the pi&#8217;s native audio driver, i2s support, and the stereo DAC driver, in that order, but it is likely that blacklisting one of them will fix the problem.</p>
<p>The final thing to change is the baudrate of the pi&#8217;s I2C driver.
I found that its default value was slightly error prone, and so I increased it, which resulted in error free results.
To do this, you will need to create a config file in the modprobe.d folder; I called mine i2cbaud.conf. To create this file, simply enter into the terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo nano /etc/modprobe.d/i2cbaud.conf
</pre></div>
</div>
<p>and add this single line to it from your text editor:</p>
<div class="highlight-python"><div class="highlight"><pre>options i2c_bcm2708 baudrate=500000
</pre></div>
</div>
<p>Now just reboot:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo reboot
</pre></div>
</div>
</div>
</div>
<div class="section" id="using-the-rpisoc-with-your-computer">
<span id="getting-started-computer"></span><h2>Using the RPiSoC with your computer!<a class="headerlink" href="#using-the-rpisoc-with-your-computer" title="Permalink to this headline">¶</a></h2>
<p>To use the RPiSoC on your PC, you will need to have the RPiSoC device driver installer, you will need python 2.7 installed, your system will need to have python added to its environmental variables, and you will need to download a couple of Python packages, specifically pyserial and the rpisoc package.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">This has only been tested for Windows 7, Windows 8, and Ubuntu. Theoretically everything should work on OS X, but this has not yet been tested and there are no installation instructions</td>
</tr>
</tbody>
</table>
<div class="section" id="windows-installation">
<h3>Windows Installation<a class="headerlink" href="#windows-installation" title="Permalink to this headline">¶</a></h3>
<p>This will cover installation procedures for Windows 7 and Windows 8</p>
<div class="section" id="installing-the-rpisoc-device-driver">
<h4>Installing the RPiSoC device driver<a class="headerlink" href="#installing-the-rpisoc-device-driver" title="Permalink to this headline">¶</a></h4>
<p>The details of this step will depend on your Operating System. The driver which ultimately must be installed is <a class="reference external" href="https://github.com/EmbeditElectronics/psoc_2_pi/blob/master/PSoC%20Creator/USBUART_cdc.inf">this one</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Windows 7:</th><td class="field-body"><p class="first">When you connect your RPiSoC to a USB port on your PC, it will try to find a driver to install. Of course, it will fail because you need to manually provide it the driver.</p>
<ul class="simple">
<li>Open your Device Manager</li>
<li>In &#8220;Other Devices&#8221; you should see <em>RPiSoC</em> with an exclamation sign next to it, indicating that it is an unknown device</li>
<li>Right click on <em>RPiSoC</em> and choose <strong>Properties</strong></li>
<li>On the <em>General</em> tab, there should be an option for <strong>Update Driver...</strong> If this option is not available, disconnect and reconnect the device.</li>
<li>Click <strong>Update Driver...</strong></li>
<li>Choose <strong>Browse my computer for driver software</strong></li>
<li>Now, simply provide the address bar with the folder that contains the driver linked above</li>
<li>If the driver cannot be found, make sure that the driver is saved as a .inf</li>
<li>Once the driver is found, it might warn you that the driver cannot be verified. Simply choose to install the driver anyway if this happens</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Windows 8:</th><td class="field-body"><p class="first last">The process should be the same as above, except you might have a problem if the driver isn&#8217;t being recognized correctly as signed. If this happens, simply disable driver signature verification so that you are able to install unsigned drivers. This will require a couple of restarts. A good guide on this procedure is shown <a class="reference external" href="https://learn.sparkfun.com/tutorials/disabling-driver-signature-on-windows-8/disabling-signed-driver-enforcement-on-windows-8">in this SparkFun tutorial</a></p>
</td>
</tr>
</tbody>
</table>
<p>With the driver successfully installed on your system as <em>Cypress USB UART</em> you can move onto the next step</p>
</div>
<div class="section" id="installing-python">
<h4>Installing Python<a class="headerlink" href="#installing-python" title="Permalink to this headline">¶</a></h4>
<p>On OS X and Linux, Python comes preinstalled. For Windows it does not, and so it must be downloaded and installed.</p>
<ul>
<li><p class="first">Navigate to the <a class="reference external" href="https://www.python.org/download/releases/2.7.8/">release page for Python 2.7.8</a> and scroll down to the <strong>Download</strong> section</p>
</li>
<li><dl class="first docutils">
<dt>Choose the appropriate installer for your Operating system.</dt>
<dd><ul class="first last simple">
<li>For 32 bit Windows systems choose <em>Windows x86 MSI Installer (2.7.8)</em></li>
<li>For 64 bit Windows systems choose <em>Windows X86-64 MSI Installer (2.7.8)</em></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">During installation, make sure Python is installed to <tt class="code docutils literal"><span class="pre">C:\Python27</span></tt></p>
</li>
</ul>
</div>
<div class="section" id="edit-windows-path-variables-to-include-python">
<h4>Edit Windows path variables to include Python<a class="headerlink" href="#edit-windows-path-variables-to-include-python" title="Permalink to this headline">¶</a></h4>
<p>This step will allow you to call python and any packages you might have installed without having to explicitly provide their paths.  This process will be slightly different between Windows 7 and 8</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Windows 7:</th><td class="field-body"><ul class="first simple">
<li>Right click on <strong>Computer</strong> and select <strong>Properties</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Windows 8:</th><td class="field-body"><ul class="first last simple">
<li>Press <strong>Windows key + C</strong> to bring up your charms panel.</li>
<li>Navigate to <em>Settings</em> and then <em>Control Panel</em></li>
<li>Then, select <em>Systems and Security</em> then <em>System</em></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>From here, the steps are identical.</p>
<ul>
<li><dl class="first docutils">
<dt>To the left, there will be a toolbar called <em>Control Panel Home</em></dt>
<dd><ul class="first last simple">
<li>In this toolbar, select <strong>Advanced system settings</strong></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">In the <em>Advanced</em> tab, select <strong>Environmental Variables...</strong></p>
</li>
<li><p class="first">In the console window on the bottom, labeled <em>System variables</em>, scroll to the variable <strong>PATH</strong> and select <strong>Edit</strong></p>
</li>
<li><p class="first">In the <em>Variable value</em> window, scroll to the very end and enter the following text exactly <tt class="code docutils literal"><span class="pre">;C:\Python27;C:\Python27\Scripts</span></tt></p>
</li>
</ul>
<p>To test this, restart your computer, then open the windows command prompt, and type <tt class="code docutils literal"><span class="pre">python</span></tt>. If everything so far has been successful, this will launch the python interpreter in your console window.</p>
</div>
<div class="section" id="install-required-packages">
<h4>Install required packages<a class="headerlink" href="#install-required-packages" title="Permalink to this headline">¶</a></h4>
<p>For your PC, there is only one third party package apart from our own that is required- pyserial. You must install this and the rpisoc package to use the API.</p>
<p>The installer for each package can be found on our respective PyPi pages.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">PySerial:</th><td class="field-body"><ul class="first simple">
<li><a class="reference external" href="https://pypi.python.org/pypi/pyserial">pyserial PyPi page</a></li>
<li>From that page, download and run <em>pyserial-2.7.win32.exe (md5)</em></li>
<li>Run the .exe when it finishes downloading and follow the on-screen instructions to install pyserial</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">RPiSoC:</th><td class="field-body"><ul class="first simple">
<li><a class="reference external" href="https://pypi.python.org/pypi/RPiSoC">rpisoc PyPi page</a></li>
<li>From that page, download and run <em>RPiSoC-1.2.5.win32.exe (md5)</em> if you are using the 32-bit Python installation, or <em>RPiSoC-1.2.5.win-amd64.exe (md5)</em> if you are using the 64-but installation</li>
<li>Run the .exe when it finishes downloading and follow the on-screen instructions to install pyserial</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body"><p class="first">If in either case there is a problem with the installer (such as it being unable to locate your python installation), use pip to install the packages instead.
To install the packages using pip, open the command prompt and enter the following commands:</p>
<div class="last highlight-python"><div class="highlight"><pre>easy_install pip
pip install pyserial
pip install rpisoc
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="linux-installation">
<h3>Linux Installation<a class="headerlink" href="#linux-installation" title="Permalink to this headline">¶</a></h3>
<p>Since the Raspberry Pi itself runs a Linux distribution, the installation process should be identical. Refer to <a class="reference internal" href="#getting-started-source"><em>Download the Python source</em></a> for instructions.</p>
</div>
<div class="section" id="using-the-api">
<h3>Using the API<a class="headerlink" href="#using-the-api" title="Permalink to this headline">¶</a></h3>
<p>Of course, you will need to download an appropriate IDE to begin writing your python scripts, but which one you use is up to you. The only difference between this code and your Raspberry Pi code will be in the construction of the <a class="reference internal" href="code_rpisoc.html#rpisoc.RPiSoC" title="rpisoc.RPiSoC"><tt class="xref py py-class docutils literal"><span class="pre">rpisoc.RPiSoC</span></tt></a> object.
Here, the following two lines should always be at the top of your scripts:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">rpisoc</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">RPiSoC</span><span class="p">(</span><span class="s">&#39;SERIAL&#39;</span><span class="p">,</span> <span class="n">DEBUG</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>To test that everything is working:</p>
<ul>
<li><p class="first">Plug your RPiSoC into your PC using a USB cable</p>
</li>
<li><dl class="first docutils">
<dt>Run any of <a class="reference external" href="https://github.com/EmbeditElectronics/psoc_2_pi/tree/master/API_Python/examples">these scripts</a></dt>
<dd><ul class="first last simple">
<li>To run any script, either open it using python (double clicking it will work if it opens using python by default), or navigate to the directory containing the script with you command prompt and enter <tt class="code docutils literal"><span class="pre">python</span> <span class="pre">script_name.py</span></tt>. So to run <em>blinky.py</em> from the examples, navigate to the <em>examples</em> folder in your command prompt and enter <tt class="code docutils literal"><span class="pre">python</span> <span class="pre">blinky.py</span></tt> into the console</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="changing-communication-protocol-used-by-the-api">
<span id="getting-started-mods"></span><h2>Changing communication protocol used by the API<a class="headerlink" href="#changing-communication-protocol-used-by-the-api" title="Permalink to this headline">¶</a></h2>
<p>By default, the API uses Serial for convenience of PC usage. To change this to SPI or I2C (which can only be used on the Raspberry Pi of course), it is designed to be very simple, so don&#8217;t fret!</p>
<p>On the Python Side, simply change your initialization of the RPiSoC object from:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">RPiSoC</span><span class="p">(</span><span class="s">&#39;SERIAL&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>so that it instead reads:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">RPiSoC</span><span class="p">(</span><span class="s">&#39;SPI&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">RPiSoC</span><span class="p">(</span><span class="s">&#39;I2C&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, in the PSoC Creator program navigate to <em>mem1.h</em> and you will find three lines that look like this:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">//#define USE_SPI                     // KEEP THIS UNCOMMENTED TO USE SPI -- COMMENT THE OTHER PROTOCOLS!!</span>
<span class="c1">//#define USE_I2C                     // KEEP THIS UNCOMMENTED TO USE I2C -- COMMENT THE OTHER PROTOCOLS!!</span>
<span class="cp">#define USE_SERIAL                    </span><span class="c1">// KEEP THIS UNCOMMENTED TO USE SERIAL -- COMMENT THE OTHER PROTOCOLS!!</span>
</pre></div>
</div>
<p>This of course indicates that Serial is to be used. To change this, simply change which protocols are commented out. For instance, to change to SPI, you would replace those lines with:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#define USE_SPI                     </span><span class="c1">// KEEP THIS UNCOMMENTED TO USE SPI -- COMMENT THE OTHER PROTOCOLS!!</span>
<span class="c1">//#define USE_I2C                   // KEEP THIS UNCOMMENTED TO USE I2C -- COMMENT THE OTHER PROTOCOLS!!</span>
<span class="c1">//#define USE_SERIAL                // KEEP THIS UNCOMMENTED TO USE SERIAL -- COMMENT THE OTHER PROTOCOLS!!</span>
</pre></div>
</div>
<p>Now, the firmware will compile itself so that SPI will be used.
But, you will still need to have the SPI and I2C components included in your schematic file. To do this:</p>
<ul>
<li><p class="first">Navigate to the <em>.cysch</em> page of your workspace, and go to the <em>COMMUNICATIONS</em> tab</p>
</li>
<li><p class="first">Here delete the USB component, and replace it with either the SPI or I2C component, depending on which you intend to use.</p>
</li>
<li><p class="first">For SPI, make sure to choose <em>SPI Slave Full Duplex mode Macro v2.60</em> from the component catalog.</p>
</li>
<li><p class="first">For I2C, choose <em>I2C Slave (UDB) v3.30</em> make sure, to delete the <em>RST_1</em> pin, and wire it to a <em>Logic Low 0</em> component instead.</p>
</li>
<li><p class="first">Navigate to your design wide resources page (<em>.cydwr</em>) to give pin assignments to your new pins</p>
</li>
<li><dl class="first docutils">
<dt>For SPI:</dt>
<dd><ul class="first last simple">
<li>Assign <em>MISO_1</em> to P1[3]</li>
<li>Assign <em>MOSI_1</em> to P1[4]</li>
<li>Assign <em>SCLK_1</em> to P1[1]</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>For I2C:</dt>
<dd><ul class="first last simple">
<li>Assign <em>SDA_1</em> to P1[6]</li>
<li>Assign <em>SCL_1</em> to P1[7]</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Now just compile the program, and redownload it to the RPiSoC using the Bootloader Host Tool. For more information on this step, be sure to review <a class="reference internal" href="#getting-started-rpisoc"><em>Using the RPiSoC</em></a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/Embedit_flat.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#using-the-rpisoc">Using the RPiSoC</a></li>
<li><a class="reference internal" href="#program-your-rpisoc">Program your RPiSoC</a></li>
<li><a class="reference internal" href="#using-the-rpisoc-with-the-raspberry-pi">Using the RPiSoC with the Raspberry Pi</a><ul>
<li><a class="reference internal" href="#download-the-python-source">Download the Python source</a><ul>
<li><a class="reference internal" href="#installation-using-pip">Installation using pip</a></li>
<li><a class="reference internal" href="#installation-using-git">Installation using Git</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configure-spi-and-download-spidev">Configure SPI and download spidev</a></li>
<li><a class="reference internal" href="#configure-i2c-and-download-smbus">Configure I2C and download smbus</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-the-rpisoc-with-your-computer">Using the RPiSoC with your computer!</a><ul>
<li><a class="reference internal" href="#windows-installation">Windows Installation</a><ul>
<li><a class="reference internal" href="#installing-the-rpisoc-device-driver">Installing the RPiSoC device driver</a></li>
<li><a class="reference internal" href="#installing-python">Installing Python</a></li>
<li><a class="reference internal" href="#edit-windows-path-variables-to-include-python">Edit Windows path variables to include Python</a></li>
<li><a class="reference internal" href="#install-required-packages">Install required packages</a></li>
</ul>
</li>
<li><a class="reference internal" href="#linux-installation">Linux Installation</a></li>
<li><a class="reference internal" href="#using-the-api">Using the API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changing-communication-protocol-used-by-the-api">Changing communication protocol used by the API</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to the RPiSoC Python API documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="code.html"
                        title="next chapter">API modules</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/getting_started.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="code.html" title="API modules"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to the RPiSoC Python API documentation!"
             >previous</a> |</li>
        <li><a href="index.html">RPiSoC Python API 1.2.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, EmbeditElectronics.
      Last updated on Jan 21, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>